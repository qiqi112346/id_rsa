<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>动态河流</title>
  <!--加载不同版本Cesium库-->
  <script src="http://webclient.smaryun.com/static/libs/loadCesium.js"></script>
  <!--plugin脚本库-->
  <script src="http://webclient.smaryun.com/static/libs/cdn/zondyclient/webclient-common.min.js"></script>
  <script src="http://webclient.smaryun.com/static/libs/cdn/zondyclient/webclient-cesium-plugin.min.js"></script>
  <script src="http://webclient.smaryun.com/static/assets/js/TDT-token.js"></script>

  <!--html2canvas库-->
  <script src="http://webclient.smaryun.com/static/libs/cdn/html2canvas/html2canvas.min.js"></script>
  <!--示例中面板、按钮等，第三方layui的js库与css样式-->
  <script src="http://webclient.smaryun.com/static/libs/cdn/layui/layui.js"></script>
  <link rel="stylesheet" href="http://webclient.smaryun.com/static/libs/cdn/layui/css/layui.css" />
  <!--示例公共样式-->
  <link rel="stylesheet" href="http://webclient.smaryun.com/static/libs/css/style.css" />
  <link rel="stylesheet" href="http://webclient.smaryun.com/static/libs/css/graphic.css" />
  <script>
    'use strict'
    //定义三维视图的主要类
    let map, sceneView, viewer, graphicsLayer, river
    //取得jquery对象
    let $ = layui.$

    //地图初始化函数
    function init() {
      //初始化球体
      initViewer()
      //创建切换Cesium版本的按钮
      createChangeTab()
      //初始化标绘图层
      addGraphicLayer()
      //添加一条河流
      addRiver()
      //加载天地图底图
      addTDT()
      //加载地形
      addTerrain()
      //视点跳转
      flyTo()
      //初始化示例UI
      initUI()
    }

    //初始化球体
    function initViewer() {
      //初始化图层管理容器
      map = new zondy.Map()
      //初始化地图视图对象
      sceneView = new zondy.cesium.SceneView({
        //视图id
        viewId: 'mapgis-3d-viewer',
        //图层管理容器
        map: map
      })
      //获取视图对象
      viewer = sceneView.getInnerView()
      //显示鼠标位置
      viewer.showPosition()
    }

    //添加标绘图层
    function addGraphicLayer() {
      // 参考API: http://webclient.smaryun.com/static/modules/cesium/api/cesium-mapgis/GraphicsLayer.html
        graphicsLayer = new zondy.cesium.GraphicsLayer(viewer, {
        //点击标绘对象的回调函数
        clickGraphic: function (graphic) {
          if (!graphic) return
          river = graphic
          console.log(river)
          //这个时候展开编辑面板
          $('#river-width').val(river.style.width)
          $('#river-alpha').val(river.style.alpha)
          $('#river-speed').val(river.style.speed)
          $('#editPanel').show()
        },
        getGraphic: function () {
          graphicsLayer.stopDrawing()
        }
      })
    }

    //添加一条河流
    function addRiver() {
      //添加一个水流
      // 参考API: http://webclient.smaryun.com/static/modules/cesium/api/cesium-mapgis/Graphic.html
      let riverGraphic = new zondy.cesium.Graphic({
        type: 'dynamicRiver',
        positions: getPositions(),
        style: {
          width: 40,
          alpha: 0.5,
          offsetHeight: 6.5,
          image: 'http://webclient.smaryun.com/static/libs/cdn/zondyclient/webclient-cesium-plugin-resource/assets/images/river3.jpg'
        }
      })
      graphicsLayer.addGraphic(riverGraphic)
    }

    function getPositions() {
      let river = [
        {
          x: -2253301.064829806,
          y: 5006673.654536826,
          z: 3235154.2278585443
        },
        {
          x: -2253378.3092472167,
          y: 5006628.7531945575,
          z: 3235167.3437167285
        },
        {
          x: -2253486.4225784815,
          y: 5006579.46184045,
          z: 3235166.2723880103
        },
        {
          x: -2253638.8920032047,
          y: 5006494.7189571615,
          z: 3235191.057019917
        },
        {
          x: -2253778.4536697017,
          y: 5006418.073309457,
          z: 3235212.322820965
        },
        {
          x: -2253893.957764905,
          y: 5006375.524232042,
          z: 3235197.783086754
        },
        {
          x: -2253979.616088565,
          y: 5006398.260971009,
          z: 3235103.5671688137
        },
        {
          x: -2254000.4227957316,
          y: 5006434.488869937,
          z: 3235033.491367497
        },
        {
          x: -2254000.5206143125,
          y: 5006481.979115984,
          z: 3234960.442550447
        },
        {
          x: -2253946.908089842,
          y: 5006538.885708044,
          z: 3234910.0880324547
        },
        {
          x: -2253924.7961459984,
          y: 5006592.1987659875,
          z: 3234843.432575361
        },
        {
          x: -2253868.8300749445,
          y: 5006667.8435875615,
          z: 3234765.882591152
        },
        {
          x: -2253885.1696912134,
          y: 5006710.423298593,
          z: 3234689.1122929077
        },
        {
          x: -2253929.0473467894,
          y: 5006737.315319309,
          z: 3234617.4085325403
        },
        {
          x: -2253975.073974615,
          y: 5006759.95154185,
          z: 3234550.757635715
        },
        {
          x: -2254020.157093554,
          y: 5006764.939815187,
          z: 3234511.8855861584
        },
        {
          x: -2254043.864647154,
          y: 5006786.592454492,
          z: 3234462.1899344656
        },
        {
          x: -2254072.486083835,
          y: 5006808.0710580265,
          z: 3234409.3641166687
        },
        {
          x: -2254102.4507744513,
          y: 5006840.498173674,
          z: 3234338.77083312
        },
        {
          x: -2254167.9921175456,
          y: 5006839.615816881,
          z: 3234294.7556419573
        },
        {
          x: -2254267.380884819,
          y: 5006821.063550522,
          z: 3234254.4793516523
        },
        {
          x: -2254386.4181972784,
          y: 5006776.493923121,
          z: 3234240.6323765195
        },
        {
          x: -2254476.3791057025,
          y: 5006732.091622756,
          z: 3234246.612233981
        },
        {
          x: -2254548.5345496894,
          y: 5006691.192392636,
          z: 3234259.5457261773
        },
        {
          x: -2254612.133299581,
          y: 5006645.182957034,
          z: 3234286.2499777228
        },
        {
          x: -2254691.4772377415,
          y: 5006598.758799308,
          z: 3234302.6957900343
        },
        {
          x: -2254777.7958315467,
          y: 5006546.938134474,
          z: 3234322.6067882837
        },
        {
          x: -2254848.452474745,
          y: 5006508.777933822,
          z: 3234332.3672244176
        },
        {
          x: -2254934.4236444836,
          y: 5006454.72979283,
          z: 3234355.916706949
        },
        {
          x: -2255017.3231680347,
          y: 5006411.06264433,
          z: 3234365.6484372914
        },
        {
          x: -2255114.0221745092,
          y: 5006333.217214133,
          z: 3234418.368650071
        },
        {
          x: -2255234.7016150467,
          y: 5006240.587062299,
          z: 3234477.1944002565
        },
        {
          x: -2255272.7198802433,
          y: 5006172.366900882,
          z: 3234555.728328424
        },
        {
          x: -2255292.4489577776,
          y: 5006104.023992374,
          z: 3234647.116692281
        },
        {
          x: -2255291.224054687,
          y: 5006041.144461967,
          z: 3234744.6140204617
        },
        {
          x: -2255290.8499582014,
          y: 5005988.955354982,
          z: 3234825.1001380365
        },
        {
          x: -2255268.8518201318,
          y: 5005911.726338096,
          z: 3234959.0213919096
        },
        {
          x: -2255257.8415970136,
          y: 5005840.874913499,
          z: 3235075.5815910124
        },
        {
          x: -2255258.8777839625,
          y: 5005790.814688059,
          z: 3235151.788030693
        },
        {
          x: -2255267.055062411,
          y: 5005734.0905392235,
          z: 3235233.298647075
        },
        {
          x: -2255299.399070022,
          y: 5005662.945479359,
          z: 3235320.241092072
        },
        {
          x: -2255319.1803122284,
          y: 5005585.506386558,
          z: 3235425.5510854195
        },
        {
          x: -2255390.3591393777,
          y: 5005491.658444032,
          z: 3235520.4747343743
        },
        {
          x: -2255461.35208714,
          y: 5005413.197260211,
          z: 3235591.8666877025
        },
        {
          x: -2255555.3864625576,
          y: 5005304.433968964,
          z: 3235693.951341194
        },
        {
          x: -2255624.1145668747,
          y: 5005237.234195026,
          z: 3235749.6457061972
        },
        {
          x: -2255704.87088325,
          y: 5005154.1825619,
          z: 3235821.381680844
        },
        {
          x: -2255782.7111975965,
          y: 5005079.18556931,
          z: 3235882.7002943153
        },
        {
          x: -2255874.5834036977,
          y: 5004989.562663331,
          z: 3235956.7420699475
        },
        {
          x: -2255956.285282097,
          y: 5004914.101046718,
          z: 3236016.0797617943
        },
        {
          x: -2256080.4226831244,
          y: 5004816.524982383,
          z: 3236080.0074811284
        },
        {
          x: -2256156.743410483,
          y: 5004753.075586682,
          z: 3236124.623334419
        },
        {
          x: -2256210.436904749,
          y: 5004704.818078877,
          z: 3236161.565093992
        },
        {
          x: -2256290.2718265825,
          y: 5004633.720810138,
          z: 3236215.489677185
        },
        {
          x: -2256395.032799575,
          y: 5004545.477873886,
          z: 3236278.469029077
        },
        {
          x: -2256467.027770599,
          y: 5004496.606631314,
          z: 3236303.658992289
        },
        {
          x: -2256563.689660754,
          y: 5004430.988460971,
          z: 3236337.4794072425
        },
        {
          x: -2256675.264363987,
          y: 5004361.402013842,
          z: 3236367.0591552723
        },
        {
          x: -2256777.216924802,
          y: 5004318.85329296,
          z: 3236361.7699397453
        },
        {
          x: -2256859.7896108883,
          y: 5004276.280710123,
          z: 3236369.841489956
        },
        {
          x: -2256939.0053660236,
          y: 5004238.023250025,
          z: 3236373.7285284107
        },
        {
          x: -2257021.634989503,
          y: 5004204.217524712,
          z: 3236368.4057334955
        },
        {
          x: -2257126.5185046894,
          y: 5004152.328409511,
          z: 3236375.42885313
        },
        {
          x: -2257218.482335092,
          y: 5004120.696802454,
          z: 3236360.369721056
        },
        {
          x: -2257339.1059584473,
          y: 5004079.3312292155,
          z: 3236340.376689553
        },
        {
          x: -2257466.7994322614,
          y: 5004049.98629341,
          z: 3236296.9534974294
        },
        {
          x: -2257554.2480517398,
          y: 5004032.281460942,
          z: 3236263.5585232475
        },
        {
          x: -2257649.801511303,
          y: 5004019.795766956,
          z: 3236216.5190938385
        },
        {
          x: -2257752.058632144,
          y: 5004030.557433715,
          z: 3236129.1448827307
        },
        {
          x: -2257828.779309744,
          y: 5004028.487881577,
          z: 3236079.1638927464
        },
        {
          x: -2257905.2536047036,
          y: 5004037.629066912,
          z: 3236012.1350026643
        },
        {
          x: -2257993.326417699,
          y: 5004060.607232585,
          z: 3235915.8278325815
        },
        {
          x: -2258093.521181468,
          y: 5004079.557030294,
          z: 3235817.2723669186
        },
        {
          x: -2258186.194053398,
          y: 5004108.445999251,
          z: 3235708.664679231
        },
        {
          x: -2258245.4784394456,
          y: 5004117.838678926,
          z: 3235652.757295046
        },
        {
          x: -2258348.9064853666,
          y: 5004150.287614908,
          z: 3235531.232490966
        },
        {
          x: -2258420.526034412,
          y: 5004168.537837347,
          z: 3235453.5581438355
        },
        {
          x: -2258515.025511374,
          y: 5004201.787189083,
          z: 3235336.994894315
        },
        {
          x: -2258612.962456238,
          y: 5004225.345891666,
          z: 3235232.9219365017
        },
        {
          x: -2258659.6799485623,
          y: 5004239.136821381,
          z: 3235179.357948912
        },
        {
          x: -2258782.251710974,
          y: 5004224.910546618,
          z: 3235116.2428240664
        },
        {
          x: -2258867.8275000756,
          y: 5004202.176596868,
          z: 3235091.850478823
        },
        {
          x: -2258955.850652386,
          y: 5004165.99886593,
          z: 3235086.3541928744
        },
        {
          x: -2259072.6500934893,
          y: 5004110.869811835,
          z: 3235090.025279387
        },
        {
          x: -2259170.172593584,
          y: 5004052.02233292,
          z: 3235112.7875762605
        },
        {
          x: -2259248.1233985987,
          y: 5004008.008178988,
          z: 3235126.3304513628
        },
        {
          x: -2259335.682362274,
          y: 5003928.534610248,
          z: 3235187.766298594
        },
        {
          x: -2259432.3707328085,
          y: 5003841.21999501,
          z: 3235254.860179989
        },
        {
          x: -2259513.2560030622,
          y: 5003798.801434607,
          z: 3235263.928364046
        },
        {
          x: -2259600.5068310923,
          y: 5003721.29712539,
          z: 3235322.3284693575
        },
        {
          x: -2259717.065250174,
          y: 5003617.179714976,
          z: 3235401.382817979
        },
        {
          x: -2259778.4695683764,
          y: 5003563.402936605,
          z: 3235441.4006354427
        },
        {
          x: -2259846.524579398,
          y: 5003457.852771187,
          z: 3235556.482934931
        },
        {
          x: -2259913.901335248,
          y: 5003375.020236795,
          z: 3235637.052262598
        },
        {
          x: -2259950.655578139,
          y: 5003311.351639643,
          z: 3235709.339257013
        },
        {
          x: -2259990.7739084503,
          y: 5003242.529525031,
          z: 3235787.2153536486
        },
        {
          x: -2260033.266558334,
          y: 5003174.621857301,
          z: 3235862.028392312
        },
        {
          x: -2260055.8017135886,
          y: 5003117.722400302,
          z: 3235933.78403914
        },
        {
          x: -2260094.630575952,
          y: 5003040.737452785,
          z: 3236025.0469580684
        },
        {
          x: -2260151.5716086556,
          y: 5002969.784699888,
          z: 3236094.4939697916
        },
        {
          x: -2260233.9705575877,
          y: 5002889.945584722,
          z: 3236160.0429121507
        },
        {
          x: -2260354.50459963,
          y: 5002792.485497331,
          z: 3236226.224731309
        },
        {
          x: -2260489.831235639,
          y: 5002735.345088221,
          z: 3236220.183983853
        },
        {
          x: -2260564.468979039,
          y: 5002724.034988362,
          z: 3236185.8081309525
        },
        {
          x: -2260621.6370214745,
          y: 5002723.4403557265,
          z: 3236147.074057657
        },
        {
          x: -2260730.011135458,
          y: 5002724.288688245,
          z: 3236070.6111379075
        },
        {
          x: -2260818.594538317,
          y: 5002733.140260731,
          z: 3235995.566037767
        },
        {
          x: -2260896.381845069,
          y: 5002734.201947421,
          z: 3235939.9790317784
        },
        {
          x: -2260982.6000067946,
          y: 5002754.353197403,
          z: 3235849.1973864413
        },
        {
          x: -2261036.4016666743,
          y: 5002787.761328627,
          z: 3235760.49930432
        },
        {
          x: -2261111.247623276,
          y: 5002804.489387356,
          z: 3235682.721875211
        },
        {
          x: -2261180.747251157,
          y: 5002859.064718079,
          z: 3235550.625452144
        },
        {
          x: -2261243.44488123,
          y: 5002882.420280284,
          z: 3235474.0163843813
        },
        {
          x: -2261321.6098067365,
          y: 5002895.302888107,
          z: 3235403.2744138064
        },
        {
          x: -2261374.9994195434,
          y: 5002908.938213188,
          z: 3235347.579649581
        },
        {
          x: -2261434.0182935903,
          y: 5002922.782124295,
          z: 3235288.0669653
        },
        {
          x: -2261504.346974655,
          y: 5002936.874219594,
          z: 3235220.3881660304
        },
        {
          x: -2261558.903148677,
          y: 5002962.578538993,
          z: 3235145.103352128
        },
        {
          x: -2261632.4232442873,
          y: 5002959.691722978,
          z: 3235101.2414605203
        },
        {
          x: -2261754.8953741174,
          y: 5002938.386938277,
          z: 3235053.340378401
        },
        {
          x: -2261855.6102161794,
          y: 5002903.749942157,
          z: 3235040.0566350515
        },
        {
          x: -2261995.4794819197,
          y: 5002844.192021861,
          z: 3235039.4283015467
        },
        {
          x: -2262088.8698447067,
          y: 5002798.907911247,
          z: 3235047.5326299784
        },
        {
          x: -2262159.7663398627,
          y: 5002723.567950694,
          z: 3235115.8577299123
        },
        {
          x: -2262197.0136371483,
          y: 5002665.305350149,
          z: 3235180.481249006
        },
        {
          x: -2262249.6455303337,
          y: 5002624.748152883,
          z: 3235208.1341907126
        },
        {
          x: -2262322.64449242,
          y: 5002520.90391788,
          z: 3235321.110944812
        },
        {
          x: -2262341.4394643665,
          y: 5002438.722330927,
          z: 3235437.353020883
        },
        {
          x: -2262330.0622047987,
          y: 5002367.570502077,
          z: 3235556.8897507153
        },
        {
          x: -2262337.276628927,
          y: 5002317.208626406,
          z: 3235655.142480981
        },
        {
          x: -2262407.5242079897,
          y: 5002247.596045737,
          z: 3235750.417105237
        },
        {
          x: -2262440.3095991556,
          y: 5002180.846874147,
          z: 3235806.9447066127
        },
        {
          x: -2262500.197821497,
          y: 5002100.588358639,
          z: 3235859.609216725
        },
        {
          x: -2262574.147046517,
          y: 5002007.527287962,
          z: 3235947.329168145
        },
        {
          x: -2262683.523500702,
          y: 5001911.098891747,
          z: 3236017.489717401
        },
        {
          x: -2262792.4187070034,
          y: 5001798.224044077,
          z: 3236113.213306523
        },
        {
          x: -2262872.8192275017,
          y: 5001705.224654197,
          z: 3236198.8118655696
        },
        {
          x: -2262929.470518364,
          y: 5001622.847518732,
          z: 3236284.39260964
        },
        {
          x: -2263031.592132082,
          y: 5001515.16427751,
          z: 3236376.197170181
        },
        {
          x: -2263133.465593914,
          y: 5001420.629209096,
          z: 3236449.864575041
        },
        {
          x: -2263260.2560942,
          y: 5001334.250887923,
          z: 3236494.0635822434
        },
        {
          x: -2263402.56743498,
          y: 5001273.918613692,
          z: 3236487.7328708065
        },
        {
          x: -2263543.298280236,
          y: 5001233.853481032,
          z: 3236451.2216797685
        },
        {
          x: -2263669.013823092,
          y: 5001200.3572253445,
          z: 3236415.107097576
        },
        {
          x: -2263766.3670971678,
          y: 5001205.269812051,
          z: 3236340.1314797085
        },
        {
          x: -2263859.879975117,
          y: 5001204.79575366,
          z: 3236276.0262395367
        },
        {
          x: -2263964.5341920494,
          y: 5001240.867859531,
          z: 3236148.518223154
        },
        {
          x: -2264045.958439364,
          y: 5001271.008803484,
          z: 3236046.0523649645
        },
        {
          x: -2264081.3960186304,
          y: 5001320.162048215,
          z: 3235946.280622738
        },
        {
          x: -2264102.9813101306,
          y: 5001374.1520885145,
          z: 3235848.858062554
        },
        {
          x: -2264139.427720587,
          y: 5001414.352289773,
          z: 3235761.9752548863
        },
        {
          x: -2264102.1734133805,
          y: 5001497.999160842,
          z: 3235660.8492443324
        },
        {
          x: -2264059.6846096646,
          y: 5001577.080046936,
          z: 3235570.370637196
        },
        {
          x: -2263995.5118253543,
          y: 5001648.749775651,
          z: 3235506.1343329027
        },
        {
          x: -2263947.0698413057,
          y: 5001707.612472885,
          z: 3235449.982680273
        },
        {
          x: -2263899.870313389,
          y: 5001777.909283219,
          z: 3235375.652481665
        },
        {
          x: -2263852.4357943214,
          y: 5001844.474592721,
          z: 3235307.130768932
        },
        {
          x: -2263831.2217736016,
          y: 5001895.623869905,
          z: 3235243.9351702277
        },
        {
          x: -2263776.641767957,
          y: 5002001.605115226,
          z: 3235120.3774569137
        },
        {
          x: -2263791.2992292433,
          y: 5002071.428974433,
          z: 3235003.925366329
        },
        {
          x: -2263779.201804039,
          y: 5002137.235413498,
          z: 3234911.4874030924
        },
        {
          x: -2263786.5088216364,
          y: 5002190.796569861,
          z: 3234824.4602697836
        },
        {
          x: -2263760.9883463015,
          y: 5002279.626830733,
          z: 3234706.072357211
        },
        {
          x: -2263766.5983620654,
          y: 5002380.968870115,
          z: 3234544.1939579784
        },
        {
          x: -2263792.3621792775,
          y: 5002437.300653341,
          z: 3234435.5651486963
        },
        {
          x: -2263849.900993791,
          y: 5002493.742598311,
          z: 3234303.301333894
        },
        {
          x: -2263948.2233229405,
          y: 5002537.721255528,
          z: 3234160.7445170907
        },
        {
          x: -2264007.5275277384,
          y: 5002548.743794838,
          z: 3234099.4201668203
        },
        {
          x: -2264096.2809626176,
          y: 5002557.769103021,
          z: 3234020.547318196
        },
        {
          x: -2264234.2340898686,
          y: 5002559.572115027,
          z: 3233918.825456636
        },
        {
          x: -2264407.425553246,
          y: 5002580.977572982,
          z: 3233760.663599478
        },
        {
          x: -2264657.9900112352,
          y: 5002565.30646288,
          z: 3233605.279360672
        }
      ]

      let positions = []
      for (let index in river) {
        let item = river[index]
        positions.push(new Cesium.Cartesian3(item.x, item.y, item.z))
      }
      return positions
    }

    //加载天地图
    function addTDT() {
      let TDTLayer = new zondy.layer.WMTSLayer({
        // 加载经纬度的影像地图
        url: 'http://t6.tianditu.gov.cn/img_c/wmts',
        // 天地图必须加token，且token名为tk
        tokenKey: 'tk',
        // token请在天地图官网申请
        tokenValue: getTDTToken()
      })
      map.add(TDTLayer)
    }

    //添加地形
    async function addTerrain() {
      viewer.terrainProvider = await zondy.cesium.CesiumTerrainProvider.fromUrl('http://webclient.smaryun.com:8200/3DData/TerrainCache/HubeiTerrain/', {
        requestWaterMask: true,
        requestVertexNormals: true
      })
    }

    //视点跳转
    function flyTo() {
      //飞到指定视角
      sceneView.flyTo({
        center: [114.37967660386984, 30.61778467314864, 4425.649447943115],
        duration: 2,
        orientation: {
          heading: Cesium.Math.toRadians(328.57390858047887), //方位角
          pitch: Cesium.Math.toRadians(-38.71591771237303), //俯仰角
          roll: 0 //翻滚角
        }
      })
    }

    //初始化示例UI
    function initUI() {
      $('#river-width').bind('input propertychange', function () {
        river.style.width = $('#river-width').val()
      })
      $('#river-height').bind('input propertychange', function () {
        river.style.height = $('#river-height').val()
      })
      $('#river-alpha').bind('input propertychange', function () {
        river.style.alpha = $('#river-alpha').val()
      })
      $('#river-speed').bind('input propertychange', function () {
        river.style.speed = clampNumberValue($('#river-speed').val(), [0])
      })
    }

    function startDrawingRiver() {
      // 展示面板
      $('#editPanel').hide()
      // 宽度input框中value中的设置(添加默认值)
      let width =
        Number($('#river-width').val()) &&
          Number.isNaN(Number($('#river-width').val()))
          ? Number($('#river-width').val())
          : 100
      graphicsLayer.startDrawing({
        type: 'dynamicRiver',
        style: {
          // 宽度
          width: width,
          isLerpKeySpot: true,
          offsetHeight: 3.5,
          image: 'http://webclient.smaryun.com/static/libs/cdn/zondyclient/webclient-cesium-plugin-resource/assets/images/river3.jpg'
        }
      })
    }

    function deleteRiver() {
      river.remove()
      $('#editPanel').hide()
    }

    //删除标绘
    function deleteLabel() {
      circle.remove()
      $('#editPanel').hide()
    }

    // 获取合法的number数据输入
    function clampNumberValue(inputValue, limits) {
      let max, min
      if (Array.isArray(limits) && limits.length > 0) {
        if (limits.length === 1) {
          min = limits[0]
        } else {
          max = limits[1]
        }
      }
      let value = Number(inputValue)
      if (Number.isNaN(value)) {
        if (typeof min === 'number') {
          return min
        } else {
          return 0
        }
      }
      if (typeof min === 'number' && value <= min) {
        return min
      }
      if (typeof max === 'number' && value >= max) {
        return max
      }
      return value
    }
  </script>
</head>

<body onload="init()">
  <div id="mapgis-3d-viewer"></div>
  <div class="layui-panel layui-panel-right" style="text-align: center; width: 140px; padding: 10px">
    <button onclick="startDrawingRiver()" style="width: auto; margin: 0 auto !important" type="button"
      class="layui-btn layui-btn-normal graphic-button-margin">
      添加河流
    </button>
  </div>
  <div class="layui-panel layui-panel-right" id="editPanel" style="display: none; top: 70px">
    <form class="layui-form" action="">
      <div class="sample-main-panel">
        <div class="layui-form-item">
          <label class="layui-form-label">宽度</label>
          <div class="layui-input-block">
            <input id="river-width" type="text" class="layui-input" />
          </div>
        </div>
        <div class="layui-form-item">
          <label class="layui-form-label">透明度</label>
          <div class="layui-input-block" style="width: 183px">
            <input id="river-alpha" type="text" autocomplete="off" class="layui-input" />
          </div>
        </div>
        <div class="layui-form-item">
          <label class="layui-form-label">speed</label>
          <div class="layui-input-block">
            <input id="river-speed" type="text" autocomplete="off" class="layui-input" />
          </div>
        </div>
      </div>
      <div class="sample-button-panel">
        <button onclick="$('#editPanel').hide()" style="float: right; width: auto; margin-right: 0 !important"
          type="button" class="layui-btn layui-btn-normal graphic-button-margin">
          关闭面板
        </button>
        <span onclick="deleteRiver()" style="
              cursor: pointer;
              float: right;
              line-height: 32px;
              margin-right: 15px;
            ">删除河流</span>
      </div>
    </form>
  </div>
</body>
<style></style>

</html>
